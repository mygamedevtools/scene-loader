name: ðŸš€ Release (Preview)
on:
  push:
    branches:
      - feat/*
      - fix/*

jobs:
  pre-release:
    name: release
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
      with:
        fetch-depth: 0
        persist-credentials: false
    - name: Semantic Release
      id: semantic
      uses: cycjimmy/semantic-release-action@v4
      with:
        dry_run: true
        ci: false
        extra_plugins: |
          @semantic-release/changelog
      env:
        GH_TOKEN: ${{ secrets.GH_TOKEN }}
  # pre-release:
  #   name: ðŸš€ Release
  #   runs-on: ubuntu-latest
  #   steps:
  #   - name: ðŸ“‚ Checkout
  #     uses: actions/checkout@v4
  #     with:
  #       fetch-depth: 0
  #       persist-credentials: false
  #   - name: ðŸŸ© Setup Node
  #     uses: actions/setup-node@v4
  #     with:
  #       node-version: lts/*
  #   - name: ðŸ“ Create .releaserc
  #     run: |
  #       echo '{
  #         "branches": [
  #           main, {
  #             "name": "feat/*",
  #             "prerelease": "pre"
  #           },
  #           {
  #             "name": "fix/*",
  #             "prerelease": "pre"
  #           }
  #         ],
  #         "plugins": [
  #           "@semantic-release/commit-analyzer",
  #           "@semantic-release/release-notes-generator",
  #           [
  #             "@semantic-release/changelog",
  #             {
  #               "changelogTitle": "# Changelog"
  #             }
  #           ],
  #           [
  #             "@semantic-release/npm",
  #             {
  #               "npmPublish": false,
  #               "pkgRoot": "${{ vars.PACKAGE_PATH }}",
  #               "tarballDir": "dist"
  #             }
  #           ],
  #           [
  #           "@semantic-release/github",
  #             {
  #               "assets": "dist/*.tgz"
  #             }
  #           ],
  #         ],
  #         "tagFormat": "${version}"
  #       }' > .releaserc
  #   - name: ðŸš€ Release
  #     id: release
  #     run: |
  #       npm install -g semantic-release@24 @semantic-release/changelog
  #       npx semantic-release --no-ci --dry-run
  #     env:
  #       GH_TOKEN: ${{ secrets.GH_TOKEN }}
